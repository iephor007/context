{{define "wiki_head"}}
{{end}}

{{define "wiki_menu"}}
{{end}}

{{define "wiki_list"}}
<style>
p {
	text-indent:2em;
}
.container {
	height:100%;
	min-width:300px;
}
.head {
	color:white;
	font-size:20px;
	font-weight:bold;
	background-color:#222;
	text-align:center;
	vertical-align:middle;
	padding:10px;
	width:100%;
	height:27px;
}
.title {
	font-style:italic;
}
.toggle_menu {
	cursor:pointer;
	float:left;
}
.query_menu {
	cursor:pointer;
	margin-right:20px;
	float:right;
}
.query_button {
	cursor:pointer;
	float:right;
	margin-left:10px;
}
.query_input {
	visibility:hidden;
	width:0px;
	position:absolute;
	right:40px;
	top:12px;
}
.list {
	width:15%;
	min-width:140px;
	float:left;
	max-height:1000px;
	overflow:scroll;
}
.list_item {
	padding-top:10px;
	padding-left:30px;
	min-height:30px;
	margin-left:-30px;
}
.list_item:hover, .list_item:active {
	background-color:green;
}
</style>
<div class="container">
<div class="head">
	<div class="toggle_menu" onclick="toggle()">三</div>
	<div class="query_menu">
		<input class="query_input" type="text" onkeyup="return query(event)">
		<div class="query_button" onclick="return query()"> Q</div>
	</div>
	<div class="title" onclick="return jumpto('/wiki/')">shylinux</div>
</div>
<div class="list">
	{{$msg := .}}
	{{$ncol := append . |len}}
	{{$nrow := append . 0|append .|len}}
	<ul>
	<li>
	<div class="list_item" onclick="return jumpto('/wiki/{{option $msg "parent"|meta}}')">返回上一层</div>
	</li>
	{{range $row, $val := append . 0|append .}}
		<li>
		<div class="list_item" onclick="return jumpto('/wiki/{{option $msg "dir"|meta}}/{{append $msg "name" $row}}')">
		{{append $msg "name" $row}}
		</div>
		</li>
	{{end}}
	</ul>
</div>
{{end}}

{{define "wiki_body"}}
<style>
.content {
	width:85%;
	height:100%;
	float:left;
	min-width:400px;
}
.toggle {
	background-color:green;
	width:2%;
	height:100%;
	float:left;
}
.toggle1 {
	background-color:green;
	width:2%;
	height:100%;
	float:right;
}
.texts {
	max-width:800px;
	width:94%;
	float:left;
	margin-left:2%;
}
.li_link {
	font-size:18px;
}
.number {
	float:left;
	position:relative;
	left:-6px;
	top:18px;
	text-align:right;
}
.number div {
	margin:0px;
	padding:0px;
	height:16px;
}
.record {
	margin: 10px 10px;
	float:left;
}
.menu {
}
.menu a {
	text-decoration:none;
}
.menu .h3 {
	padding-left: 10px;
}
.link {
	margin-top:10px;
	font-size: 14px;
}
.link div:first-child {
	margin-left:-10px;
}
.link div {
	padding-left:10px;
}
.number1 {
	color:#271ace;
	font-size:14px;
	font-family:monospace;
	background-color:#77b724;
	padding:5px;
	border:solid 2px green;
	margin-left:0px;
	float:left;
}
.number1 div {
	text-align:right;
	margin:0;
	padding:0;
}
</style>
<div class="content">
	<div class="toggle" title="点击，显示或隐藏目录" onclick="toggle('left')"></div>
	<div class="toggle1" title="点击，显示或隐藏目录" onclick="toggle('right')"></div>
	{{if option . "modify_time"|meta}}
	<div class="record">上次修订时间: {{option . "modify_time"|meta}} 修订次数: {{option . "modify_count"|meta}}</div>
	{{end}}
	<div class="record">上次阅读时间: {{option . "last_record_time"|meta}} 总访问量: {{option . "record_count"|meta}}</div>
	<div class="texts">
		<div class="menu"></div>
		<div class="link"></div>
		<div class="number">
			{{range option . "nline"|meta|list}}
			<div id="hash_{{.}}" style="margin-top:-1px"><code>{{.}}</code></div>
			{{end}}
		</div>
		{{$msg := .}}
		{{if append . "name"}}
            {{$l := append . "name"|len}}
            {{if eq $l 1}}
                <script>
                    location.replace("/wiki/{{option $msg "dir"|meta|unscaped}}/{{append . "name"|meta|unscaped}}");
                </script>
            {{else}}
                <ul>
                {{range $i, $v := append . "name"}}
                <li class="li_link">
                  <div>
                    <code>{{option $msg "time" $i}}&nbsp;&nbsp;&nbsp;</code>
                    <a href="/wiki/{{option $msg "dir"|meta}}/{{$v}}{{option $msg "pend" $i}}">{{$v}}{{option $msg "pend" $i}}</a>
                  </div>
                </li>
                {{end}}
                <ul>
            {{end}}
		{{else if append . "code"|meta}}
			<p><pre><code>{{append . "code"|meta}}</code></pre><p>
		{{else}}
			<p>{{append . "body"|meta|unscaped}}</p>
		{{end}}
	</div>
</div>

</div>
<script src="/library/wiki.js"></script>
{{end}}
